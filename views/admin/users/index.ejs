<%- include ('../../partials/header.ejs') %>
<%- include ('../../partials/navbar.ejs') %>
<div class="container">
    <a class="btn btn-success mt-4 mb-4" href="/admin/users/create">Criar Novo Usuário</a>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Email</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>

    <% users.forEach(user=>{%>
        <tr>
        <td><%= user.id %></td>
        <td><%= user.email %></td>
        <td>
            <a class="btn btn-warning" href="/admin/users/edit/<%= user.id %>">Editar</a>             
            <form action="/admin/users/delete" method="post" style="display:inline;" onsubmit="confirmarDelecao(event,this)">
                <input type="hidden" name="id" value="<%= user.id %>">
                <button class="btn btn-danger">Deletar</button>
            </form>
        </td>
        </tr>
    <%})%>
    </tbody>
</table>
</div>

<%- include ('../../partials/footer.ejs') %>

<script>
    function confirmarDelecao(event,form){
        event.preventDefault();
        var decision = confirm("Deseja remover este Usuário?");
        if(decision){
            form.submit();
        }
    }
</script>